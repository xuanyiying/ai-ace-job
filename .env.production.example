# Production Environment Configuration
# WARNING: This file contains sensitive information. Never commit to version control!
# Copy this file to .env.production and fill in actual values

# ============================================
# Server Configuration
# ============================================
NODE_ENV=production
PORT=3000
API_PREFIX=/api/v1

# Domain Configuration
# The main domain for the application
DOMAIN=udefined.cc
FRONTEND_URL=https://udefined.cc

# ============================================
# Database Configuration
# ============================================
# PostgreSQL Production Settings
POSTGRES_DB=interview_ai
POSTGRES_USER=postgres
POSTGRES_PASSWORD=secure_postgres_2025
# Using service name 'postgres' for internal docker network access
DATABASE_URL="postgresql://postgres:secure_postgres_2025@postgres:5432/interview_ai?schema=public&sslmode=disable&connection_limit=20&pool_timeout=30"

# Database Connection Pool
DATABASE_POOL_MIN=2
DATABASE_POOL_MAX=10
DATABASE_POOL_IDLE_TIMEOUT=10000

# ============================================
# Redis Configuration
# ============================================
# Using service name 'redis' for internal docker network access
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=secure_redis_2025
REDIS_TLS_ENABLED=false
REDIS_DB=0

# Vector Database (ChromaDB)
# Using service name 'chromadb'
CHROMA_DB_URL=http://chromadb:8000

# ============================================
# JWT Configuration
# ============================================
JWT_SECRET=CHANGE_ME_LONG_RANDOM_SECRET_AT_LEAST_32_CHARS
JWT_EXPIRES_IN=7d
JWT_REFRESH_SECRET=CHANGE_ME_ANOTHER_LONG_RANDOM_SECRET
JWT_REFRESH_EXPIRES_IN=30d
ENCRYPTION_KEY=CHANGE_ME_32_BYTE_HEX_KEY

# ============================================
# OpenAI Configuration
# ============================================
OPENAI_API_KEY=sk-your-openai-api-key-here
OPENAI_MODEL=gpt-4
OPENAI_MAX_TOKENS=2000
OPENAI_TEMPERATURE=0.7
OPENAI_TIMEOUT=30000

# ============================================
# Local AI (Ollama)
# ============================================
OLLAMA_ENABLED=true
# Use host.docker.internal if running on host machine, or service name if in docker
OLLAMA_BASE_URL=http://host.docker.internal:11434

# ============================================
# Object Storage (MinIO/S3)
# ============================================
OSS_TYPE=MINIO
OSS_BUCKET=resume-files
OSS_REGION=us-east-1
# Internal endpoint for backend (using service name 'minio')
OSS_ENDPOINT=http://minio:9000
# Public endpoint for browser access (needs domain)
OSS_PUBLIC_ENDPOINT=https://oss.udefined.cc
OSS_ACCESS_KEY=minioadmin
OSS_SECRET_KEY=secure_minio_admin_2025
OSS_PATH_STYLE=true

# ============================================
# Rate Limiting
# ============================================
RATE_LIMIT_FREE_TIER=10
RATE_LIMIT_PRO_TIER=1000
RATE_LIMIT_WINDOW=3600
RATE_LIMIT_ENABLED=true

# ============================================
# File Upload Configuration
# ============================================
MAX_FILE_SIZE=10485760
ALLOWED_FILE_TYPES=pdf,docx,txt
FILE_UPLOAD_TIMEOUT=60000

# ============================================
# Security Configuration
# ============================================
# CORS
CORS_ORIGIN=https://udefined.cc
CORS_CREDENTIALS=true

# HTTPS/TLS
FORCE_HTTPS=true
HSTS_MAX_AGE=31536000
HSTS_INCLUDE_SUBDOMAINS=true

# SSL Certificate (Let's Encrypt)
LETSENCRYPT_EMAIL=admin@udefined.cc
LETSENCRYPT_STAGING=false

# Content Security Policy
CSP_ENABLED=true

# ============================================
# Logging Configuration
# ============================================
LOG_LEVEL=info

# ============================================
# OAuth Configuration
# ============================================
# Google OAuth
GOOGLE_CLIENT_ID=your-google-client-id
GOOGLE_CLIENT_SECRET=your-google-client-secret
GOOGLE_CALLBACK_URL=https://udefined.cc/api/v1/auth/google/callback

# GitHub OAuth
GITHUB_CLIENT_ID=your-github-client-id
GITHUB_CLIENT_SECRET=your-github-client-secret
GITHUB_CALLBACK_URL=https://udefined.cc/api/v1/auth/github/callback

# BetterAuth
BETTER_AUTH_URL=https://udefined.cc
APP_ID=2378685
